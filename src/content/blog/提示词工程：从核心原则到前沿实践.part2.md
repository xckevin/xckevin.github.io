---
title: "ÊèêÁ§∫ËØçÂ∑•Á®ãÔºö‰ªéÊ†∏ÂøÉÂéüÂàôÂà∞ÂâçÊ≤øÂÆûË∑µÔºà2ÔºâÔºöpromptfoo"
excerpt: "„ÄåÊèêÁ§∫ËØçÂ∑•Á®ãÔºö‰ªéÊ†∏ÂøÉÂéüÂàôÂà∞ÂâçÊ≤øÂÆûË∑µ„ÄçÁ≥ªÂàóÁ¨¨ 2/4 ÁØáÔºöpromptfoo"
publishDate: 2025-02-24
displayInBlog: false
tags:
  - AI
  - ÊèêÁ§∫ËØçÂ∑•Á®ã
  - LLM
  - Â§ßËØ≠Ë®ÄÊ®°Âûã
series:
  name: "ÊèêÁ§∫ËØçÂ∑•Á®ãÔºö‰ªéÊ†∏ÂøÉÂéüÂàôÂà∞ÂâçÊ≤øÂÆûË∑µ"
  part: 2
  total: 4
seo:
  title: "ÊèêÁ§∫ËØçÂ∑•Á®ãÔºö‰ªéÊ†∏ÂøÉÂéüÂàôÂà∞ÂâçÊ≤øÂÆûË∑µÔºà2ÔºâÔºöpromptfoo"
  description: "„ÄåÊèêÁ§∫ËØçÂ∑•Á®ãÔºö‰ªéÊ†∏ÂøÉÂéüÂàôÂà∞ÂâçÊ≤øÂÆûË∑µ„ÄçÁ≥ªÂàóÁ¨¨ 2/4 ÁØáÔºöpromptfoo"
---
# ÊèêÁ§∫ËØçÂ∑•Á®ãÔºö‰ªéÊ†∏ÂøÉÂéüÂàôÂà∞ÂâçÊ≤øÂÆûË∑µÔºà2ÔºâÔºöpromptfoo

> Êú¨ÊñáÊòØ„ÄåÊèêÁ§∫ËØçÂ∑•Á®ãÔºö‰ªéÊ†∏ÂøÉÂéüÂàôÂà∞ÂâçÊ≤øÂÆûË∑µ„ÄçÁ≥ªÂàóÁöÑÁ¨¨ 2 ÁØáÔºåÂÖ± 4 ÁØá„ÄÇÂú®‰∏ä‰∏ÄÁØá‰∏≠ÔºåÊàë‰ª¨Êé¢ËÆ®‰∫Ü„ÄåÂºïË®ÄÔºö‰∏∫‰ΩïÊèêÁ§∫ËØçÂ∑•Á®ãÊòØÊäÄÊúØÂõ¢ÈòüÁöÑÊ†∏ÂøÉËÉΩÂäõ„ÄçÁöÑÁõ∏ÂÖ≥ÂÜÖÂÆπ„ÄÇ

### Â∑•Á®ãÂåñÂÆûË∑µÔºöÊèêÁ§∫ËØçËØÑ‰º∞‰∏éËá™Âä®Âåñ
Âú®ÂÆûÈôÖÁîü‰∫ß‰∏≠ÔºåÊàë‰ª¨ÂèØËÉΩ‰∏çÊñ≠ÂàáÊç¢Ê®°ÂûãÔºå‰ª•Ëé∑ÂèñÊõ¥Â•ΩÁöÑÊïàÊûúÊàñÊõ¥‰ΩéÁöÑÊàêÊú¨„ÄÇ‰ΩÜÁî±‰∫é LLM Êú¨Ë∫´ÁöÑÂéüÁêÜÔºàÊ¶ÇÁéá„ÄÅtokenizer„ÄÅÂèÇÊï∞Á≠âÔºâÔºåÂç≥‰ΩøÂÆåÂÖ®Áõ∏ÂêåÁöÑÊèêÁ§∫ËØçÂú®‰∏çÂêåÊ®°Âûã„ÄÅ‰∏çÂêåÁâàÊú¨‰∏äÁöÑË°®Áé∞‰πü‰ºöÊúâÂ∑®Â§ßÂ∑ÆÂºÇÔºåÂàáÊç¢Ê®°ÂûãÁîöËá≥ÂèØËÉΩÂ∏¶Êù•ÊÄßËÉΩÊòæËëó‰∏ãÈôç„ÄÇ

Ë¶ÅÂ∞ÜÊèêÁ§∫ËØçÂ∑•Á®ã‰ªé‰∏ÄÈó®‚ÄúËâ∫ÊúØ‚ÄùËΩ¨Âèò‰∏∫‰∏ÄÈó®‰∏•Ë∞®ÁöÑ‚ÄúÁßëÂ≠¶‚ÄùÔºåÂ∞±ÂøÖÈ°ªÂºïÂÖ•Á≥ªÁªüÂåñÁöÑËØÑ‰º∞‰∏éËá™Âä®ÂåñÊµÅÁ®ã„ÄÇËøô‰∏ç‰ªÖÊòØÁ°Æ‰øù AI Â∫îÁî®Ë¥®ÈáèÁöÑÂøÖË¶ÅÊâãÊÆµÔºåÊõ¥ÊòØÂÆûÁé∞ËßÑÊ®°ÂåñÈÉ®ÁΩ≤ÂíåÊåÅÁª≠‰ºòÂåñÁöÑÊ†∏ÂøÉÂ∑•Á®ãÂÆûË∑µ„ÄÇ

#### 3.1 ÊèêÁ§∫ËØçËØÑ‰º∞ÔºöÂ∫¶ÈáèÊïàÊûú‰∏éÂèëÁé∞ÈóÆÈ¢ò
ËØÑ‰º∞ÁöÑÊ†πÊú¨ÁõÆÁöÑÂú®‰∫éÔºå‰ª•ÂÆ¢ËßÇ„ÄÅÂèØÈáèÂåñÁöÑÊñπÂºèÁ°ÆÂÆöÂì™‰∏™ÁâàÊú¨ÁöÑÊèêÁ§∫ËØçÂú®ÁâπÂÆö‰ªªÂä°‰∏äË°®Áé∞Êõ¥‰ºò„ÄÇ

‰∏Ä‰∏™ÂÖ®Èù¢ÁöÑËØÑ‰º∞‰ΩìÁ≥ªÂ∫îË¶ÜÁõñ‰ª•‰∏ãÂá†‰∏™ÂÖ≥ÈîÆÁª¥Â∫¶Ôºö

- **ÂáÜÁ°ÆÊÄß‰∏éÊàêÂäüÁéáÔºàAccuracy / Success RateÔºâ**ÔºöËøôÊòØÊúÄÊ†∏ÂøÉÁöÑÊåáÊ†á„ÄÇÈúÄË¶Å‰∏∫‰ªªÂä°ÂÆö‰πâÊ∏ÖÊô∞ÁöÑÊàêÂäüÊ†áÂáÜÔºå‰æãÂ¶ÇÔºå‚ÄúÈ¶ñÊ¨°Â∞ùËØïÊàêÂäüÁéá‚Äù (`First-try success`)„ÄÇËØ•ÊåáÊ†áÁõ¥Êé•È™åËØÅ‰∫Ü **Êòì‰∫éÈ™åËØÅ (E)** ÂéüÂàôÁöÑÊúâÊïàÊÄß„ÄÇ
- **ÊïàÁéá‰∏éÊàêÊú¨ÔºàEfficiency / CostÔºâ**ÔºöÂÖ≥Ê≥®‚ÄúToken‰ΩøÁî®Èáè‚Äù (`Token usage`)ÔºåÂõ†‰∏∫ÂÆÉÁõ¥Êé•ÂÖ≥Á≥ªÂà∞APIË∞ÉÁî®ÁöÑÊàêÊú¨ÂíåÂ∫îÁî®ÁöÑÂìçÂ∫îÈÄüÂ∫¶„ÄÇËØ•ÊåáÊ†áÁõ¥Êé•Ë°°Èáè‰∫Ü **‰øùÊåÅÁÆÄÊ¥Å (K)** Âíå **ËåÉÂõ¥Á™ÑÂåñ (N)** Á≠âÂéüÂàôÂ∏¶Êù•ÁöÑÂΩ±Âìç„ÄÇ
- **‰∏ÄËá¥ÊÄß‰∏éÂèØÂ§çÁé∞ÊÄßÔºàConsistency / ReproducibilityÔºâ**ÔºöË°°ÈáèÂú®Áõ∏ÂêåÁöÑËæìÂÖ•‰∏ãÔºåÊèêÁ§∫ËØçËæìÂá∫ÁªìÊûúÁöÑÁ®≥ÂÆöÊÄß„ÄÇËøôÊòØ‰∏Ä‰∏™Â•ΩÁöÑÊèêÁ§∫ËØçÂ∫îËÉΩÊåÅÁª≠‰∫ßÁîüÂèØÈ¢ÑÊµãÁªìÊûúÁöÑÈáèÂåñÊåáÊ†áÔºåÂØπÂ∫îÁùÄ **ÁªìÊûúÂèØÂ§çÁé∞ (R)** ÂéüÂàô„ÄÇ
- **È≤ÅÊ£íÊÄßÔºàRobustnessÔºâ**ÔºöËØÑ‰º∞ÊèêÁ§∫ËØçÂú®Èù¢ÂØπÂæÆÂ∞èÁöÑËæìÂÖ•ÂèòÂåñ„ÄÅÊó†ÂÖ≥‰ø°ÊÅØÂπ≤Êâ∞ÊàñÊΩúÂú®ÁöÑÊÅ∂ÊÑèÊîªÂáªÊó∂ÁöÑË°®Áé∞„ÄÇ‰æãÂ¶ÇÔºåÂèØ‰ª•ÈÄöËøáÊ®°Êãü‰∏çÂêåÁöÑÊèêÁ§∫ËØçÊ≥®ÂÖ•ÊîªÂáªÊù•ÊµãËØïÂÖ∂ÂÆâÂÖ®Êä§Ê†èÁöÑÊúâÊïàÊÄß„ÄÇ

**A/BÊµãËØï** ÊòØ‰∏ÄÁßçÈùûÂ∏∏ÂÆûÁî®ÁöÑËØÑ‰º∞ÊñπÊ≥ï„ÄÇÊàë‰ª¨ÂèØ‰ª•ËÆæËÆ°‰∏ÄÂ•óÊ†áÂáÜÂåñÁöÑÊµãËØïÁî®‰æãÔºåÁÑ∂ÂêéËÆ©‰∏çÂêåÁâàÊú¨ÁöÑÊèêÁ§∫ËØçÔºà‰æãÂ¶ÇÔºå‰∏Ä‰∏™Âü∫Á°ÄÁöÑRAGÊ®°ÊùøÂíå‰∏Ä‰∏™Â¢ûÂä†‰∫ÜÂÆâÂÖ®Êä§Ê†èÁöÑÊ®°ÊùøÔºâÂ§ÑÁêÜËøô‰∫õÁî®‰æã„ÄÇÈÄöËøáÂπ∂ÊéíÊØîËæÉÂÆÉ‰ª¨ÁöÑËæìÂá∫ÁªìÊûúÔºåÂπ∂‰æùÊçÆ‰∏äËø∞ËØÑ‰º∞Áª¥Â∫¶ËøõË°åÊâìÂàÜÔºåÂ∞±ËÉΩÁßëÂ≠¶Âú∞Âà§Êñ≠Âì™‰∏™Ê®°ÊùøÊõ¥‰ºò„ÄÇ

##### promptfoo

promptfoo ÊòØ‰∏Ä‰∏™Áî®‰∫éÊµãËØï prompt Âíå agent ÁöÑÂ∑•ÂÖ∑ÔºåÂèØ‰ª•ÊµãËØï‰∏çÂêåÊ®°Âûã‰∏äÁöÑË°®Áé∞ÔºåÂπ∂ÈõÜÊàêÂà∞ CI/CD ÊµÅÁ®ã‰∏≠„ÄÇ

- https://github.com/promptfoo/promptfoo

Êñá‰ª∂ÁªìÊûÑ

```plain
- prompt_system.txt  // prompt ÊèêÁ§∫ËØç
- promptfooconfig.yaml // promptfoo ÈÖçÁΩÆÔºåÂåÖÂê´ÊèêÁ§∫ËØç
- prompt1_formatted.json // promptÈÖçÁΩÆ
```

```plain
# yaml-language-server: $schema=https://promptfoo.dev/config-schema.json

# Learn more about building a configuration: https://promptfoo.dev/docs/configuration/guide

description: "AI Stylist Intent Classification Tests"

prompts:
  - file://prompt1_formatted.json

providers:
  - "openai:gpt-4o-mini"

# ÈªòËÆ§ÊµãËØïÊñ≠Ë®ÄÔºöÁ°Æ‰øùÊâÄÊúâËæìÂá∫ÈÉΩÊòØÊúâÊïàÁöÑ JSON ‰∏îÂåÖÂê´ intent Â≠óÊÆµ
defaultTest:
  assert:
    - type: is-json
    - type: javascript
      value: |
        const result = JSON.parse(output);
        return result.intent !== undefined;

tests:
  # 1. SEARCH_PRODUCT - text_search (ÊñáÊú¨ÊêúÁ¥¢)
  - description: "Text search for white French dress"
    vars:
      user_input: "I want to buy a white French dress"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && 
                 result.entities.type === 'text_search' &&
                 result.entities.attributes.includes('white');

  # 2. SEARCH_PRODUCT - category match (ÂàÜÁ±ªÊêúÁ¥¢ - Tops)
  - description: "Category search - Tops"
    vars:
      user_input: "find some tops"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && 
                 result.entities.type === 'category' &&
                 result.entities.id === '1490';

  # 3. SEARCH_PRODUCT - category match (ÂàÜÁ±ªÊêúÁ¥¢ - Sale Denim)
  - description: "Category search - Sale Denim"
    vars:
      user_input: "Sale Denim"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && 
                 result.entities.type === 'category' &&
                 result.entities.id === '1600';

  # 4. SEARCH_PRODUCT - item_id_search (ÂïÜÂìÅIDÊêúÁ¥¢Ôºå5‰ΩçÂ≠óÁ¨¶)
  - description: "Item ID search (5 characters)"
    vars:
      user_input: "88010"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && 
                 result.entities.type === 'item_id_search' &&
                 result.entities.item_id === '88010';

  # 5. SEARCH_PRODUCT - order_id_search (ËÆ¢ÂçïIDÊêúÁ¥¢Ôºå>10‰ΩçÂ≠óÁ¨¶)
  - description: "Order ID search (>10 characters)"
    vars:
      user_input: "1234567890123"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && 
                 result.entities.type === 'order_id_search' &&
                 result.entities.order_id === '1234567890123';

  # 6. DIRECT_FUNCTION - cart (ÂØºËà™Âà∞Ë¥≠Áâ©ËΩ¶)
  - description: "Navigate to shopping cart"
    vars:
      user_input: "I want to go to my cart"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'DIRECT_FUNCTION' && 
                 result.entities.router === '/cart';

  # 7. DIRECT_FUNCTION - order list (Êü•ÁúãËÆ¢ÂçïÂàóË°®)
  - description: "Check order status"
    vars:
      user_input: "where is my order?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'DIRECT_FUNCTION' && 
                 result.entities.router === '/order/list';

  # 8. DIRECT_FUNCTION - specific order (Êü•ÁúãÁâπÂÆöËÆ¢ÂçïËØ¶ÊÉÖ)
  - description: "Check specific order details"
    vars:
      user_input: "Help me check the logistics for order 1234567890123"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'DIRECT_FUNCTION' && 
                 result.entities.router === '/order/detail/1234567890123';

  # 9. CUSTOMER_SERVICE - Return Policy (ËØ¢ÈóÆÈÄÄË¥ßÊîøÁ≠ñÔºåÂØºÂêëÂÆ¢Êúç)
  - description: "Ask about return policy"
    vars:
      user_input: "What is your returns policy?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && 
                 Object.keys(result.entities).length === 0;

  # 10. CUSTOMER_SERVICE - Payment Method (ËØ¢ÈóÆÊîØ‰ªòÊñπÂºèÔºåÂØºÂêëÂÆ¢Êúç)
  - description: "Ask about payment methods"
    vars:
      user_input: "How can I pay for my order?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && 
                 Object.keys(result.entities).length === 0;

  # 11. FASHION_QA - Care Instructions (Êä§ÁêÜËØ¥Êòé)
  - description: "Ask about garment care"
    vars:
      user_input: "How do I wash a silk sari?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'FASHION_QA' && 
                 result.entities.topic === 'Care Instructions';

  # 12. FASHION_QA - Styling Advice (Á©øÊê≠Âª∫ËÆÆ)
  - description: "Ask for styling advice"
    vars:
      user_input: "What is the correct way to wear a Hijab?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'FASHION_QA' && 
                 result.entities.topic === 'Styling Advice';

  # 13. FASHION_QA - Term Definition (ÊúØËØ≠ÂÆö‰πâ)
  - description: "Ask about fashion term"
    vars:
      user_input: "What does Ikat mean?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'FASHION_QA' && 
                 result.entities.topic === 'Term Definition';

  # 14. CUSTOMER_SERVICE - Request human agent (ËØ∑Ê±Ç‰∫∫Â∑•ÂÆ¢Êúç)
  - description: "Request human agent"
    vars:
      user_input: "I want to talk to a human"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && 
                 Object.keys(result.entities).length === 0;

  # 15. CUSTOMER_SERVICE - Complex query (Â§çÊùÇÊü•ËØ¢ÈúÄË¶Å‰∫∫Â∑•)
  - description: "Complex size question requiring agent"
    vars:
      user_input: "What size should I wear?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && 
                 Object.keys(result.entities).length === 0;

  # 16. AMBIGUOUS - Unclear intent (Ê®°Á≥äÊÑèÂõæ)
  - description: "Ambiguous intent - Return"
    vars:
      user_input: "Return"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'AMBIGUOUS' && 
                 result.clarification_prompt !== undefined &&
                 result.clarification_prompt.length > 0;

  # ==================== SEARCH_PRODUCT Êâ©Â±ïÊµãËØï (17-51) ====================

  # 17-21: Êõ¥Â§öÊñáÊú¨ÊêúÁ¥¢Âèò‰Ωì
  - description: "Search for specific color and style"
    vars:
      user_input: "Looking for a red evening gown"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  - description: "Search with multiple attributes"
    vars:
      user_input: "I need a black leather jacket size M"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  - description: "Search with material specification"
    vars:
      user_input: "silk scarf"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  - description: "Search with occasion"
    vars:
      user_input: "wedding dress for summer"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  - description: "Search with brand-like term"
    vars:
      user_input: "elegant palazzo pants"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  # 22-25: Á±ªÂà´ÊêúÁ¥¢Âèò‰Ωì
  - description: "Category - Sale Bottoms exact match"
    vars:
      user_input: "Sale Bottoms"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && 
                 result.entities.type === 'category' && 
                 result.entities.id === '1007';

  - description: "Category - lowercase variation"
    vars:
      user_input: "sale denim"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'category';

  - description: "Category - partial match"
    vars:
      user_input: "show me tops"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT';

  - description: "Category - with extra words"
    vars:
      user_input: "I want to see sale bottoms please"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT';

  # 26-32: Item ID ËæπÁïåÊµãËØï
  - description: "Item ID - exactly 5 digits (pure numbers)"
    vars:
      user_input: "12345"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && 
                 result.entities.type === 'item_id_search' &&
                 result.entities.item_id === '12345';

  - description: "Item ID - exactly 6 digits (pure numbers)"
    vars:
      user_input: "123456"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && 
                 result.entities.type === 'item_id_search' &&
                 result.entities.item_id === '123456';

  - description: "Not Item ID - contains letters (should be text_search)"
    vars:
      user_input: "ABC123"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && 
                 result.entities.type === 'text_search' &&
                 result.entities.query === 'ABC123';

  - description: "Not Item ID - alphanumeric (should be text_search)"
    vars:
      user_input: "A1B2C"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && 
                 result.entities.type === 'text_search';

  - description: "Not Item ID - 4 characters (too short)"
    vars:
      user_input: "1234"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type !== 'item_id_search';

  - description: "Not Item ID - 7 characters (too long)"
    vars:
      user_input: "1234567"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type !== 'item_id_search';

  - description: "Not Item ID - mixed letters and numbers (should be text_search)"
    vars:
      user_input: "Wx89T"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  - description: "Not Item ID - all letters (should be text_search)"
    vars:
      user_input: "ABCDE"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  # 33-38: Order ID ËæπÁïåÊµãËØï
  - description: "Order ID - exactly 11 characters"
    vars:
      user_input: "12345678901"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && 
                 result.entities.type === 'order_id_search' &&
                 result.entities.order_id === '12345678901';

  - description: "Order ID - 15 characters"
    vars:
      user_input: "123456789012345"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && 
                 result.entities.type === 'order_id_search';

  - description: "Order ID - alphanumeric long"
    vars:
      user_input: "ORD20250131ABCD"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && 
                 result.entities.type === 'order_id_search';

  - description: "Not Order ID - exactly 10 characters"
    vars:
      user_input: "1234567890"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type !== 'order_id_search';

  - description: "Order ID - very long"
    vars:
      user_input: "12345678901234567890"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && 
                 result.entities.type === 'order_id_search';

  - description: "Order ID with dashes (treated as text)"
    vars:
      user_input: "123-456-7890-12"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT';

  # 39-44: Ê®°Á≥äÊêúÁ¥¢ÂíåÊãºÂÜôÈîôËØØ
  - description: "Misspelled search term"
    vars:
      user_input: "I want to buy a beutiful dress"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  - description: "Search with typo"
    vars:
      user_input: "blak jeans"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  - description: "Informal search"
    vars:
      user_input: "need smth warm"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  - description: "Search with slang"
    vars:
      user_input: "cool hoodie pls"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  - description: "Very descriptive search"
    vars:
      user_input: "I'm looking for a comfortable, casual, blue cotton t-shirt"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  - description: "Search with comparison"
    vars:
      user_input: "something like a maxi dress but shorter"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  # 45-51: ÂõæÁâáÊêúÁ¥¢ÂíåÊ∑∑ÂêàËæìÂÖ•
  - description: "Image search indication"
    vars:
      user_input: "[Image uploaded] find this"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT';

  - description: "Image search with color request"
    vars:
      user_input: "[Image] do you have this in green?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT';

  - description: "Search by visual description"
    vars:
      user_input: "I saw a dress in your store window"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  - description: "Search multiple items"
    vars:
      user_input: "show me dresses and skirts"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  - description: "Search with price indication"
    vars:
      user_input: "affordable summer dress"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  - description: "Search with size in query"
    vars:
      user_input: "plus size evening gown"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  - description: "Search with emoji"
    vars:
      user_input: "üëó party dress"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  # ==================== DIRECT_FUNCTION Êâ©Â±ïÊµãËØï (52-71) ====================

  - description: "Navigate to wishlist - variation 1"
    vars:
      user_input: "take me to wishlist"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'DIRECT_FUNCTION' && result.entities.router === '/wishlist';

  - description: "Navigate to wishlist - variation 2"
    vars:
      user_input: "my favorites"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'DIRECT_FUNCTION' && result.entities.router === '/wishlist';

  - description: "View profile"
    vars:
      user_input: "my profile"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'DIRECT_FUNCTION' && result.entities.router === '/me';

  - description: "View account page"
    vars:
      user_input: "my account"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'DIRECT_FUNCTION' && result.entities.router === '/me';

  - description: "Check out cart"
    vars:
      user_input: "checkout"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'DIRECT_FUNCTION' && result.entities.router === '/cart';

  - description: "View shopping bag"
    vars:
      user_input: "my bag"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'DIRECT_FUNCTION' && result.entities.router === '/cart';

  - description: "Go to homepage"
    vars:
      user_input: "go home"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'DIRECT_FUNCTION' && result.entities.router === '/home';

  - description: "View categories"
    vars:
      user_input: "show all categories"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'DIRECT_FUNCTION' && result.entities.router === '/category';

  - description: "Check my orders"
    vars:
      user_input: "my orders"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'DIRECT_FUNCTION' && result.entities.router === '/order/list';

  - description: "View order history"
    vars:
      user_input: "order history"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'DIRECT_FUNCTION' && result.entities.router === '/order/list';

  - description: "Track specific order - variation"
    vars:
      user_input: "track order 98765432101"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'DIRECT_FUNCTION' && 
                 result.entities.router.includes('/order/detail/');

  - description: "Check order status with ID"
    vars:
      user_input: "status of order 11122233344"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'DIRECT_FUNCTION' && 
                 result.entities.router.includes('/order/detail/');

  - description: "View coupons"
    vars:
      user_input: "show my coupons"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'DIRECT_FUNCTION' && result.entities.router === '/member/my-coupons';

  - description: "Check discounts"
    vars:
      user_input: "my discounts"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'DIRECT_FUNCTION' && result.entities.router === '/member/my-coupons';

  - description: "Update address"
    vars:
      user_input: "update my address"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'DIRECT_FUNCTION' && result.entities.router === '/account/setting';

  - description: "Manage addresses"
    vars:
      user_input: "manage shipping addresses"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'DIRECT_FUNCTION' && result.entities.router === '/account/setting';

  - description: "Change language"
    vars:
      user_input: "switch language"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'DIRECT_FUNCTION' && result.entities.router === '/account/setting';

  - description: "Help center access"
    vars:
      user_input: "help center"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'DIRECT_FUNCTION' && result.entities.router === '/help-center/home';

  - description: "FAQ page"
    vars:
      user_input: "frequently asked questions"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'DIRECT_FUNCTION' && result.entities.router === '/help-center/home';

  - description: "Arabic - view cart"
    vars:
      user_input: "ÿπÿ±ÿ®ÿ© ÿßŸÑÿ™ÿ≥ŸàŸÇ"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'DIRECT_FUNCTION';

  # ==================== CUSTOMER_SERVICE - FAQÁõ∏ÂÖ≥Êâ©Â±ïÊµãËØï (72-86) ====================

  - description: "Return policy - variation 1"
    vars:
      user_input: "can I return items?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && Object.keys(result.entities).length === 0;

  - description: "Return policy - variation 2"
    vars:
      user_input: "how do returns work"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && Object.keys(result.entities).length === 0;

  - description: "Shipping inquiry"
    vars:
      user_input: "how long does shipping take?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && Object.keys(result.entities).length === 0;

  - description: "Delivery time"
    vars:
      user_input: "when will my order arrive"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && Object.keys(result.entities).length === 0;

  - description: "Shipping cost"
    vars:
      user_input: "is shipping free?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && Object.keys(result.entities).length === 0;

  - description: "Payment methods accepted"
    vars:
      user_input: "what payment methods do you accept?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && Object.keys(result.entities).length === 0;

  - description: "Can I pay with card"
    vars:
      user_input: "do you take credit cards?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && Object.keys(result.entities).length === 0;

  - description: "Cancel order inquiry"
    vars:
      user_input: "can I cancel my order?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && Object.keys(result.entities).length === 0;

  - description: "Modify order"
    vars:
      user_input: "I want to change my order"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && Object.keys(result.entities).length === 0;

  - description: "Terms and conditions"
    vars:
      user_input: "what are your terms?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && Object.keys(result.entities).length === 0;

  - description: "Privacy policy"
    vars:
      user_input: "how do you use my data?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && Object.keys(result.entities).length === 0;

  - description: "Email verification"
    vars:
      user_input: "I didn't receive verification email"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && Object.keys(result.entities).length === 0;

  - description: "Return window"
    vars:
      user_input: "how many days to return?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && Object.keys(result.entities).length === 0;

  - description: "Refund process"
    vars:
      user_input: "when will I get my refund?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && Object.keys(result.entities).length === 0;

  - description: "International shipping"
    vars:
      user_input: "do you ship internationally?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && Object.keys(result.entities).length === 0;

  # ==================== FASHION_QA Êâ©Â±ïÊµãËØï (87-101) ====================

  - description: "How to style jeans"
    vars:
      user_input: "how should I style skinny jeans?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'FASHION_QA' && result.entities.topic === 'Styling Advice';

  - description: "Outfit combination"
    vars:
      user_input: "what goes well with a black blazer?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'FASHION_QA' && result.entities.topic === 'Styling Advice';

  - description: "Color matching"
    vars:
      user_input: "what colors match with navy blue?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'FASHION_QA' && result.entities.topic === 'Styling Advice';

  - description: "Seasonal styling"
    vars:
      user_input: "how to dress for fall weather?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'FASHION_QA' && result.entities.topic === 'Styling Advice';

  - description: "Washing delicate fabric"
    vars:
      user_input: "how to clean cashmere sweater?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'FASHION_QA' && result.entities.topic === 'Care Instructions';

  - description: "Remove stains"
    vars:
      user_input: "how to remove oil stain from dress?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'FASHION_QA' && result.entities.topic === 'Care Instructions';

  - description: "Storage advice"
    vars:
      user_input: "how to store winter coats?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'FASHION_QA' && result.entities.topic === 'Care Instructions';

  - description: "Ironing tips"
    vars:
      user_input: "can I iron silk blouse?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'FASHION_QA' && result.entities.topic === 'Care Instructions';

  - description: "Fashion term - Bohemian"
    vars:
      user_input: "what is bohemian style?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'FASHION_QA' && result.entities.topic === 'Term Definition';

  - description: "Fashion term - A-line"
    vars:
      user_input: "what does A-line mean?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'FASHION_QA' && result.entities.topic === 'Term Definition';

  - description: "Fashion term - Palazzo"
    vars:
      user_input: "explain palazzo pants"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'FASHION_QA' && result.entities.topic === 'Term Definition';

  - description: "Current trends"
    vars:
      user_input: "what's trending this season?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'FASHION_QA' && result.entities.topic === 'Trend Analysis';

  - description: "Color trends"
    vars:
      user_input: "what are the popular colors for 2025?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'FASHION_QA' && result.entities.topic === 'Trend Analysis';

  - description: "Style trends"
    vars:
      user_input: "what styles are in fashion now?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'FASHION_QA' && result.entities.topic === 'Trend Analysis';

  - description: "Upcoming trends"
    vars:
      user_input: "what will be trendy next spring?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'FASHION_QA' && result.entities.topic === 'Trend Analysis';

  # ==================== CUSTOMER_SERVICE Êâ©Â±ïÊµãËØï (102-111) ====================

  - description: "Request human - direct"
    vars:
      user_input: "speak to agent"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && Object.keys(result.entities).length === 0;

  - description: "Request human - polite"
    vars:
      user_input: "can I talk to someone?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && Object.keys(result.entities).length === 0;

  - description: "Request human - urgent"
    vars:
      user_input: "I need help now"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && Object.keys(result.entities).length === 0;

  - description: "Complaint about product"
    vars:
      user_input: "This item is defective"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && Object.keys(result.entities).length === 0;

  - description: "Complaint about delivery"
    vars:
      user_input: "my package never arrived"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && Object.keys(result.entities).length === 0;

  - description: "Wrong item received"
    vars:
      user_input: "I received the wrong item"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && Object.keys(result.entities).length === 0;

  - description: "Size recommendation needed"
    vars:
      user_input: "which size should I order?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && Object.keys(result.entities).length === 0;

  - description: "Fit question"
    vars:
      user_input: 'will this fit me if I''m 5''6"?'
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && Object.keys(result.entities).length === 0;

  - description: "Account issue"
    vars:
      user_input: "I can't log into my account"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && Object.keys(result.entities).length === 0;

  - description: "Payment problem"
    vars:
      user_input: "my payment was declined"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && Object.keys(result.entities).length === 0;

  # ==================== AMBIGUOUS Êâ©Â±ïÊµãËØï (112-121) ====================

  - description: "Ambiguous - single word 'Order'"
    vars:
      user_input: "Order"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'AMBIGUOUS' && result.clarification_prompt !== undefined;

  - description: "Ambiguous - 'My order'"
    vars:
      user_input: "My order"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'AMBIGUOUS' && result.clarification_prompt !== undefined;

  - description: "Ambiguous - 'Size'"
    vars:
      user_input: "Size"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'AMBIGUOUS' && result.clarification_prompt !== undefined;

  - description: "Ambiguous - 'Help'"
    vars:
      user_input: "Help"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'AMBIGUOUS' && result.clarification_prompt !== undefined;

  - description: "Ambiguous - 'Change'"
    vars:
      user_input: "Change"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'AMBIGUOUS' && result.clarification_prompt !== undefined;

  - description: "Ambiguous - unclear question"
    vars:
      user_input: "What about it?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'AMBIGUOUS' && result.clarification_prompt !== undefined;

  - description: "Ambiguous - pronoun only"
    vars:
      user_input: "This one"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'AMBIGUOUS' && result.clarification_prompt !== undefined;

  - description: "Ambiguous - incomplete sentence"
    vars:
      user_input: "I want to"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'AMBIGUOUS' && result.clarification_prompt !== undefined;

  - description: "Ambiguous - vague intent"
    vars:
      user_input: "Something wrong"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'AMBIGUOUS' && result.clarification_prompt !== undefined;

  - description: "Ambiguous - 'More'"
    vars:
      user_input: "More"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'AMBIGUOUS' && result.clarification_prompt !== undefined;

  # ==================== ËæπÁïåÂíåÊûÅÁ´ØÊÉÖÂÜµÊµãËØï (122-135) ====================

  - description: "Empty or whitespace only"
    vars:
      user_input: "   "
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent !== undefined;

  - description: "Single character"
    vars:
      user_input: "a"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent !== undefined;

  - description: "Numbers only - 3 digits"
    vars:
      user_input: "123"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT';

  - description: "Special characters"
    vars:
      user_input: "!@#$%"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent !== undefined;

  - description: "Mixed languages"
    vars:
      user_input: "I want ŸÅÿ≥ÿ™ÿßŸÜ dress"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT';

  - description: "ALL CAPS"
    vars:
      user_input: "SHOW ME DRESSES"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  - description: "lowercase no punctuation"
    vars:
      user_input: "i need a black dress"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  - description: "Multiple emojis"
    vars:
      user_input: "üòçüíÉüëó"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent !== undefined;

  - description: "URL in input"
    vars:
      user_input: "www.example.com/dress"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent !== undefined;

  - description: "Email in input"
    vars:
      user_input: "user@example.com"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent !== undefined;

  - description: "Very long text"
    vars:
      user_input: "I am looking for a very specific type of dress that has to be blue and elegant and suitable for a wedding ceremony and also needs to be comfortable because I will be wearing it for many hours and it should have some elegant details but not too much and the price should be reasonable"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  - description: "Repeated words"
    vars:
      user_input: "dress dress dress"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  - description: "Question mark only"
    vars:
      user_input: "???"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent !== undefined;

  - description: "Greeting instead of query"
    vars:
      user_input: "Hello!"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent !== undefined;

  # ==================== SEARCH_PRODUCT Ê∑±Â∫¶Êâ©Â±ï (136-165) ====================

  # 136-145: Â≠£ËäÇÊÄßÂíåÂú∫ÂêàÊêúÁ¥¢
  - description: "Summer collection search"
    vars:
      user_input: "summer dresses"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  - description: "Winter clothing"
    vars:
      user_input: "warm winter coat"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  - description: "Spring fashion"
    vars:
      user_input: "spring floral skirt"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  - description: "Fall/autumn wear"
    vars:
      user_input: "autumn cardigan"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  - description: "Wedding occasion"
    vars:
      user_input: "what should I wear to a wedding?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  - description: "Party outfit"
    vars:
      user_input: "outfit for birthday party"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  - description: "Formal event"
    vars:
      user_input: "formal business attire"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  - description: "Casual everyday"
    vars:
      user_input: "casual everyday wear"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  - description: "Gym/workout clothing"
    vars:
      user_input: "workout clothes for gym"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  - description: "Beach vacation"
    vars:
      user_input: "beach vacation outfits"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  # 146-155: ‰ª∑Ê†ºÂíåÂ∞∫Á†ÅÁõ∏ÂÖ≥ÊêúÁ¥¢
  - description: "Budget friendly search"
    vars:
      user_input: "cheap dresses under 50"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  - description: "Discount search"
    vars:
      user_input: "discounted items"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  - description: "Luxury items"
    vars:
      user_input: "luxury designer dress"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  - description: "Plus size specific"
    vars:
      user_input: "plus size maxi dress"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  - description: "Petite size"
    vars:
      user_input: "petite jeans"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  - description: "Tall size"
    vars:
      user_input: "tall pants for women"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  - description: "Maternity wear"
    vars:
      user_input: "maternity dress"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  - description: "Size range query"
    vars:
      user_input: "do you have this in XL?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  - description: "Numeric size"
    vars:
      user_input: "size 12 dress"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  - description: "International size"
    vars:
      user_input: "EU size 40 shoes"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  # 156-165: ÁâπÊÆäÊùêË¥®ÂíåÈ¢úËâ≤Âèò‰Ωì
  - description: "Organic fabric"
    vars:
      user_input: "organic cotton t-shirt"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  - description: "Sustainable fashion"
    vars:
      user_input: "sustainable eco-friendly clothing"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  - description: "Vegan leather"
    vars:
      user_input: "vegan leather jacket"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  - description: "Breathable fabric"
    vars:
      user_input: "breathable linen dress"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  - description: "Specific color shade"
    vars:
      user_input: "navy blue blouse"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  - description: "Light color variation"
    vars:
      user_input: "light pink sweater"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  - description: "Dark color variation"
    vars:
      user_input: "dark green pants"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  - description: "Pattern specific"
    vars:
      user_input: "striped shirt"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  - description: "Print pattern"
    vars:
      user_input: "floral print dress"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  - description: "Texture description"
    vars:
      user_input: "soft velvet top"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  # ==================== DIRECT_FUNCTION Âú∫ÊôØÊâ©Â±ï (166-180) ====================

  - description: "Payment method page"
    vars:
      user_input: "add payment method"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'DIRECT_FUNCTION' && result.entities.router === '/account/setting';

  - description: "View saved cards"
    vars:
      user_input: "my saved credit cards"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'DIRECT_FUNCTION' && result.entities.router === '/account/setting';

  - description: "Track package"
    vars:
      user_input: "track my package"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'DIRECT_FUNCTION' && result.entities.router === '/order/list';

  - description: "Delivery status"
    vars:
      user_input: "check delivery status"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'DIRECT_FUNCTION' && result.entities.router === '/order/list';

  - description: "Order again"
    vars:
      user_input: "reorder previous items"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'DIRECT_FUNCTION' && result.entities.router === '/order/list';

  - description: "Saved addresses"
    vars:
      user_input: "view saved addresses"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'DIRECT_FUNCTION' && result.entities.router === '/account/setting';

  - description: "Add new address"
    vars:
      user_input: "add new shipping address"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'DIRECT_FUNCTION' && result.entities.router === '/account/setting';

  - description: "Notification settings"
    vars:
      user_input: "manage notifications"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'DIRECT_FUNCTION' && result.entities.router === '/account/setting';

  - description: "Email preferences"
    vars:
      user_input: "change email preferences"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'DIRECT_FUNCTION' && result.entities.router === '/account/setting';

  - description: "Recently viewed"
    vars:
      user_input: "show recently viewed items"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'DIRECT_FUNCTION';

  - description: "Favorites list"
    vars:
      user_input: "my favorite items"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'DIRECT_FUNCTION' && result.entities.router === '/wishlist';

  - description: "Main menu"
    vars:
      user_input: "show main menu"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'DIRECT_FUNCTION' && result.entities.router === '/home';

  - description: "Back to shop"
    vars:
      user_input: "back to shopping"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'DIRECT_FUNCTION' && result.entities.router === '/home';

  - description: "New arrivals"
    vars:
      user_input: "show new arrivals"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'DIRECT_FUNCTION' && result.entities.router === '/category';

  - description: "Best sellers"
    vars:
      user_input: "show best sellers"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'DIRECT_FUNCTION' && result.entities.router === '/category';

  # ==================== CUSTOMER_SERVICE - FAQÁªÜÂàÜÂú∫ÊôØ (181-195) ====================

  - description: "Return process steps"
    vars:
      user_input: "how do I start a return?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && Object.keys(result.entities).length === 0;

  - description: "Exchange instead of return"
    vars:
      user_input: "can I exchange instead of returning?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && Object.keys(result.entities).length === 0;

  - description: "Return shipping cost"
    vars:
      user_input: "do I pay for return shipping?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && Object.keys(result.entities).length === 0;

  - description: "International shipping cost"
    vars:
      user_input: "how much is international shipping?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && Object.keys(result.entities).length === 0;

  - description: "Express shipping"
    vars:
      user_input: "do you offer express shipping?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && Object.keys(result.entities).length === 0;

  - description: "Tracking number"
    vars:
      user_input: "when will I get tracking number?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && Object.keys(result.entities).length === 0;

  - description: "PayPal acceptance"
    vars:
      user_input: "do you accept PayPal?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && Object.keys(result.entities).length === 0;

  - description: "Installment payment"
    vars:
      user_input: "can I pay in installments?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && Object.keys(result.entities).length === 0;

  - description: "Gift card payment"
    vars:
      user_input: "can I use gift card?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && Object.keys(result.entities).length === 0;

  - description: "Order cancellation time"
    vars:
      user_input: "how long do I have to cancel?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && Object.keys(result.entities).length === 0;

  - description: "Change delivery address"
    vars:
      user_input: "can I change delivery address after ordering?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && Object.keys(result.entities).length === 0;

  - description: "Size chart request"
    vars:
      user_input: "where is the size chart?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && Object.keys(result.entities).length === 0;

  - description: "Gift wrapping service"
    vars:
      user_input: "do you offer gift wrapping?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && Object.keys(result.entities).length === 0;

  - description: "Loyalty program"
    vars:
      user_input: "what is your loyalty program?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && Object.keys(result.entities).length === 0;

  - description: "Student discount"
    vars:
      user_input: "do you have student discount?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && Object.keys(result.entities).length === 0;

  # ==================== FASHION_QA ‰∏ì‰∏öÊâ©Â±ï (196-210) ====================

  - description: "Fabric comparison"
    vars:
      user_input: "what's the difference between cotton and linen?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'FASHION_QA' && result.entities.topic === 'Term Definition';

  - description: "Body type styling"
    vars:
      user_input: "what should I wear for pear body shape?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'FASHION_QA' && result.entities.topic === 'Styling Advice';

  - description: "Office dress code"
    vars:
      user_input: "what's appropriate for business casual?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'FASHION_QA' && result.entities.topic === 'Styling Advice';

  - description: "Accessory pairing"
    vars:
      user_input: "what jewelry goes with cocktail dress?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'FASHION_QA' && result.entities.topic === 'Styling Advice';

  - description: "Shoe pairing"
    vars:
      user_input: "what shoes to wear with midi skirt?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'FASHION_QA' && result.entities.topic === 'Styling Advice';

  - description: "Layering advice"
    vars:
      user_input: "how to layer clothes for winter?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'FASHION_QA' && result.entities.topic === 'Styling Advice';

  - description: "Denim care"
    vars:
      user_input: "how often should I wash jeans?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'FASHION_QA' && result.entities.topic === 'Care Instructions';

  - description: "Shrinkage prevention"
    vars:
      user_input: "how to prevent clothes from shrinking?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'FASHION_QA' && result.entities.topic === 'Care Instructions';

  - description: "Dry cleaning"
    vars:
      user_input: "what items need dry cleaning?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'FASHION_QA' && result.entities.topic === 'Care Instructions';

  - description: "Color bleeding prevention"
    vars:
      user_input: "how to prevent colors from bleeding?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'FASHION_QA' && result.entities.topic === 'Care Instructions';

  - description: "Fashion term - capsule wardrobe"
    vars:
      user_input: "what is a capsule wardrobe?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'FASHION_QA' && result.entities.topic === 'Term Definition';

  - description: "Fashion term - athleisure"
    vars:
      user_input: "explain athleisure style"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'FASHION_QA' && result.entities.topic === 'Term Definition';

  - description: "Fashion term - minimalist"
    vars:
      user_input: "what does minimalist fashion mean?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'FASHION_QA' && result.entities.topic === 'Term Definition';

  - description: "Seasonal color palette"
    vars:
      user_input: "what colors are trending for winter?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'FASHION_QA' && result.entities.topic === 'Trend Analysis';

  - description: "Retro trends"
    vars:
      user_input: "are 90s styles coming back?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'FASHION_QA' && result.entities.topic === 'Trend Analysis';

  # ==================== CUSTOMER_SERVICE Â§çÊùÇÂú∫ÊôØ (211-220) ====================

  - description: "Quality complaint - fabric"
    vars:
      user_input: "the fabric quality is poor"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && Object.keys(result.entities).length === 0;

  - description: "Color mismatch"
    vars:
      user_input: "the color doesn't match the picture"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && Object.keys(result.entities).length === 0;

  - description: "Size too small/large"
    vars:
      user_input: "the size runs too small"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && Object.keys(result.entities).length === 0;

  - description: "Missing item in order"
    vars:
      user_input: "one item is missing from my order"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && Object.keys(result.entities).length === 0;

  - description: "Damaged during shipping"
    vars:
      user_input: "item arrived damaged"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && Object.keys(result.entities).length === 0;

  - description: "Delayed shipment"
    vars:
      user_input: "my order is taking too long"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && Object.keys(result.entities).length === 0;

  - description: "Out of stock issue"
    vars:
      user_input: "when will this be back in stock?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && Object.keys(result.entities).length === 0;

  - description: "Custom order request"
    vars:
      user_input: "can I customize this dress?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && Object.keys(result.entities).length === 0;

  - description: "Bulk order inquiry"
    vars:
      user_input: "I want to order 50 pieces"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && Object.keys(result.entities).length === 0;

  - description: "Refund not received"
    vars:
      user_input: "I haven't received my refund yet"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' && Object.keys(result.entities).length === 0;

  # ==================== AMBIGUOUS Êõ¥Â§öÊ®°Á≥äÊÉÖÂÜµ (221-230) ====================

  - description: "Ambiguous - 'Item'"
    vars:
      user_input: "Item"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'AMBIGUOUS' && result.clarification_prompt !== undefined;

  - description: "Ambiguous - 'Price'"
    vars:
      user_input: "Price"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'AMBIGUOUS' && result.clarification_prompt !== undefined;

  - description: "Ambiguous - 'Color'"
    vars:
      user_input: "Color"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'AMBIGUOUS' && result.clarification_prompt !== undefined;

  - description: "Ambiguous - 'That one'"
    vars:
      user_input: "That one"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'AMBIGUOUS' && result.clarification_prompt !== undefined;

  - description: "Ambiguous - 'Can I'"
    vars:
      user_input: "Can I?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'AMBIGUOUS' && result.clarification_prompt !== undefined;

  - description: "Ambiguous - 'How much'"
    vars:
      user_input: "How much?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'AMBIGUOUS' && result.clarification_prompt !== undefined;

  - description: "Ambiguous - 'When'"
    vars:
      user_input: "When?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'AMBIGUOUS' && result.clarification_prompt !== undefined;

  - description: "Ambiguous - 'Why not'"
    vars:
      user_input: "Why not?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'AMBIGUOUS' && result.clarification_prompt !== undefined;

  - description: "Ambiguous - 'Maybe'"
    vars:
      user_input: "Maybe"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'AMBIGUOUS' && result.clarification_prompt !== undefined;

  - description: "Ambiguous - 'Not sure'"
    vars:
      user_input: "Not sure"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'AMBIGUOUS' && result.clarification_prompt !== undefined;

  # ==================== CONVERSATIONAL ÂØπËØùÂú∫ÊôØ (231-235) ====================

  - description: "Conversational - filter by price"
    vars:
      user_input: "show me cheaper ones"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CONVERSATIONAL' || result.intent === 'SEARCH_PRODUCT';

  - description: "Conversational - sort by rating"
    vars:
      user_input: "sort by best rated"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CONVERSATIONAL' || result.intent === 'SEARCH_PRODUCT';

  - description: "Conversational - change size"
    vars:
      user_input: "do you have it in medium?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CONVERSATIONAL' || result.intent === 'SEARCH_PRODUCT';

  - description: "Conversational - add to bag"
    vars:
      user_input: "add this to my bag"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CONVERSATIONAL' || result.intent === 'DIRECT_FUNCTION';

  - description: "Conversational - show similar"
    vars:
      user_input: "show me similar items"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CONVERSATIONAL' || result.intent === 'SEARCH_PRODUCT';

  # ==================== Ë∑®ËØ≠Ë®ÄÂíåÊ∑∑ÂêàÊµãËØï (236-245) ====================

  - description: "Arabic - search for dress"
    vars:
      user_input: "ÿ£ÿ±ŸäÿØ ŸÅÿ≥ÿ™ÿßŸÜ"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT';

  - description: "Arabic - my orders"
    vars:
      user_input: "ÿ∑ŸÑÿ®ÿßÿ™Ÿä"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'DIRECT_FUNCTION';

  - description: "Arabic - help"
    vars:
      user_input: "ŸÖÿ≥ÿßÿπÿØÿ©"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent !== undefined;

  - description: "Arabic - return policy"
    vars:
      user_input: "ÿ≥Ÿäÿßÿ≥ÿ© ÿßŸÑÿ•ÿ±ÿ¨ÿßÿπ"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'CUSTOMER_SERVICE' || result.intent === 'DIRECT_FUNCTION';

  - description: "Mixed - English with Arabic word"
    vars:
      user_input: "show me ÿπÿ®ÿßŸäÿ©"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT';

  - description: "Arabic number in English sentence"
    vars:
      user_input: "I want item ÿ±ŸÇŸÖ Ÿ®Ÿ®Ÿ†Ÿ°Ÿ†"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT';

  - description: "Transliteration error"
    vars:
      user_input: "abaya dress"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent === 'SEARCH_PRODUCT' && result.entities.type === 'text_search';

  - description: "Mixed languages - price"
    vars:
      user_input: "ŸÉŸÖ ÿßŸÑÿ≥ÿπÿ± for this dress?"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent !== undefined;

  - description: "Arabic greeting"
    vars:
      user_input: "ŸÖÿ±ÿ≠ÿ®ÿß"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent !== undefined;

  - description: "Arabic thank you"
    vars:
      user_input: "ÿ¥ŸÉÿ±ÿßŸã"
    assert:
      - type: javascript
        value: |
          const result = JSON.parse(output);
          return result.intent !== undefined;
```

```plain
[
  {
    "role": "system",
    "content": "file://prompt_system.txt"
  },
  {
    "role": "user",
    "content": "{{user_input}}"
  }
]
```

```plain
You are a professional women's fashion e-commerce AI assistant, named "AI Stylist". Users may interact with you in English, Arabic, or via voice or image uploads. Your core task is to accurately understand the user's multimodal input (text, speech-to-text, images, IDs), classify it into a clear Intent, and extract key Entities.

Your response **must** follow these rules:
1.  **Role**: You are a fashionable, efficient, and professional shopping assistant.
2.  **Goal**: To help users find products, use app functions, answer fashion questions, or connect to customer service.
3.  **Output Format**: You **must** return only a JSON object. Do not include any greetings, explanations, comments, or Markdown tags outside of the JSON.
4.  **Intent Classification**: You must classify the user's intent into one of the **6** types below.
5.  **Language Consistency**: If you need to return text (e.g., in `clarification_prompt`), you must use the same language the user provided in their input.

---

## Intent & Entity Definitions

### 1. `SEARCH_PRODUCT`
The user wants to find a product. `Entities` must be returned and must include a `type` field.

* **`type: "text_search"`**: The user is searching with a text description.
    * `query`: (String) The refined search query.
    * `attributes`: (Array) Extracted attributes like color, style, material, etc.
* **`type: "image_search"`**: The user uploaded an image to search for similar items.
    * `attributes`: (Array) [Optional] Attributes extracted if the user provided text with the image (e.g., "find this in blue").
* **`type: "item_id_search"`**: The user entered **only** a string that is **5 or 6 digits (numbers only)**.
    * `item_id`: (String) The numeric ID entered by the user.
    * **Important**: Item IDs must contain **only numbers** (0-9). If the input contains letters, it should NOT be classified as item_id_search.
* **`type: "order_id_search"`**: The user entered **only** a string with a length greater than 10.
    * `order_id`: (String) The ID entered by the user.
* **`type: "category"`**: The user's input **exactly matches** or is **strongly related to** a `title` in the category list below.
    * `id`: (String) The ID of the matched category.
    * **Available Category List**: `[{"id":"1007","title":"Sale Bottoms"},{"id":"1600","title":"Sale Denim"},{"id":"1490","title":"Tops"}]`

### 2. `DIRECT_FUNCTION`
The user wants to access a specific app feature. `Entities` must include the `router` field.

* **Available Router List**:
    1.  `/home` (Homepage)
    2.  `/category` (Category Page)
    3.  `/cart` (Shopping Cart)
    4.  `/wishlist` (Wishlist)
    5.  `/me` (ME Page / Profile)
    6.  `/help-center/home` (FAQ & Policy)
    7.  `/member/my-coupons` (My Coupons)
    8.  `/account/setting` (Manage Address - Note: Change Language also uses this route)
    9.  `/account/setting` (Change Language)
    10. `/order/list` (Order List)
    11. `/order/detail/:orderId` (Order Details)
* **Special Rule**: If the user asks about a **specific** order (e.g., "check order 12345678901"), use the `/order/detail/:orderId` route and populate the ID.

### 3. `FASHION_QA`
The user is asking a general question about fashion, styling, product care, or trends. `Entities` must include a `topic` field.
* **Available Fashion Topics**:
    * `Styling Advice`: Questions about how to wear, match, or style clothing (e.g., "how to style this", "how to wear a hijab").
    * `Care Instructions`: Questions about washing, storing, or maintaining garments (e.g., "how to wash silk sari").
    * `Term Definition`: Questions asking to explain a fashion term (e.g., "what is Ikat", "define Zardozi").
    * `Trend Analysis`: Questions about current or upcoming trends, colors, or styles (e.g., "latest fashion colors").
* **Entities**:
    * `topic`: (String) The exact topic name from the list above.

### 4. `CUSTOMER_SERVICE` 
The user explicitly asks for a human agent, **or** their question involves:
* **Policy & FAQ questions**: Return policy, shipping, payment methods, cancellations, terms & conditions, privacy, email verification, etc.
* **Complex complaints**: Product quality issues, damaged items, wrong items, delivery problems
* **Personal inquiries**: Size recommendations, fit questions, stock availability, customization requests
* **Account issues**: Login problems, payment failures, refund status
* `Entities` must be an empty object `{}`.

### 5. `AMBIGUOUS`
The user's intent is unclear and requires clarification.
* `clarification_prompt`: (String) A question to clarify the user's intent (must be in the user's language).

### 6. `CONVERSATIONAL`
The user is making small talk or a contextual follow-up (based on the previous turn).
* `context_action`: (String) The contextual action (e.g., "FILTER", "SORT", "ADD_TO_CART").
* `attributes`: (Array) Attributes mentioned in the follow-up.

---

## JSON Output Structure & Examples

# 1. Search Product (SEARCH_PRODUCT)

# User: "I want to buy a white French dress"
{"intent": "SEARCH_PRODUCT", "entities": {"type": "text_search", "query": "French dress", "attributes": ["white"]}}

# User: "find some tops"
{"intent": "SEARCH_PRODUCT", "entities": {"type": "category", "id": "1490"}}

# User: "Sale Denim"
{"intent": "SEARCH_PRODUCT", "entities": {"type": "category", "id": "1600"}}

# User: [Uploads an image of a jacket]
{"intent": "SEARCH_PRODUCT", "entities": {"type": "image_search", "attributes": []}}

# User: [Uploads image] "I want this in red"
{"intent": "SEARCH_PRODUCT", "entities": {"type": "image_search", "attributes": ["red"]}}

# User: "88010" (5 digits, pure numbers - triggers item_id_search)
{"intent": "SEARCH_PRODUCT", "entities": {"type": "item_id_search", "item_id": "88010"}}

# User: "ABC123" (Contains letters - NOT item_id_search, should be text_search)
{"intent": "SEARCH_PRODUCT", "entities": {"type": "text_search", "query": "ABC123", "attributes": []}}

# User: "1234567890123" (Length > 10, triggers order_id_search)
{"intent": "SEARCH_PRODUCT", "entities": {"type": "order_id_search", "order_id": "1234567890123"}}

# 2. Direct Function (DIRECT_FUNCTION)

# User: "where is my order?"
{"intent": "DIRECT_FUNCTION", "entities": {"router": "/order/list"}}

# User: "show me my wishlist"
{"intent": "DIRECT_FUNCTION", "entities": {"router": "/wishlist"}}

# User: "I want to go to my cart"
{"intent": "DIRECT_FUNCTION", "entities": {"router": "/cart"}}

# User: "Help me check the logistics for order 1234567890123"
{"intent": "DIRECT_FUNCTION", "entities": {"router": "/order/detail/1234567890123"}}

# User: "I want to change my address"
{"intent": "DIRECT_FUNCTION", "entities": {"router": "/account/setting"}}

# User: "ŸÉŸäŸÅ ŸäŸÖŸÉŸÜŸÜŸä ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑŸÑÿ∫ÿ©ÿü" (How can I change the language?)
{"intent": "DIRECT_FUNCTION", "entities": {"router": "/account/setting"}}

# 3. Fashion Q&A (FASHION_QA)

# User: "How do I wash a silk sari?"
{"intent": "FASHION_QA", "entities": {"topic": "Care Instructions"}}

# User: "What is the correct way to wear a Hijab?"
{"intent": "FASHION_QA", "entities": {"topic": "Styling Advice"}}

# User: [Uploads image of a dress] "How can I style this?"
{"intent": "FASHION_QA", "entities": {"topic": "Styling Advice"}}

# User: "What does Ikat mean?"
{"intent": "FASHION_QA", "entities": {"topic": "Term Definition"}}

# User: "What are the new fashion trends?"
{"intent": "FASHION_QA", "entities": {"topic": "Trend Analysis"}}

# 4. Customer Service (CUSTOMER_SERVICE)

# User: "I want to talk to a human" 
{"intent": "CUSTOMER_SERVICE", "entities": {}}  

# User: "What is your returns policy?" (FAQ/Policy question)
{"intent": "CUSTOMER_SERVICE", "entities": {}}  

# User: "How can I pay for my order?" (Payment policy question)
{"intent": "CUSTOMER_SERVICE", "entities": {}}  

# User: "How long does shipping take?" (Shipping policy question)
{"intent": "CUSTOMER_SERVICE", "entities": {}}  

# User: "What size should I wear?" (Personal inquiry)
{"intent": "CUSTOMER_SERVICE", "entities": {}}  

# User: "I want to complain about this package" (Complaint)
{"intent": "CUSTOMER_SERVICE", "entities": {}}

# User: "The item arrived damaged" (Quality issue)
{"intent": "CUSTOMER_SERVICE", "entities": {}}

# 5. Ambiguous (AMBIGUOUS)

# User: "Return"
{"intent": "AMBIGUOUS", "clarification_prompt": "Are you looking to check our return policy, or process a return for an existing order?"}

# User: "My item"
{"intent": "AMBIGUOUS", "clarification_prompt": "Are you looking for your order list, or your wishlist?"}

# 6. Conversational (CONVERSATIONAL)

# (Previous turn was a search for "dresses")
# User: "What about in blue?"
{"intent": "CONVERSATIONAL", "entities": {"context_action": "FILTER", "attributes": ["blue"]}}
```

ÊâßË°å `promptfoo eval` Âíå `promptfoo view` ÂèØÂú®ÊµèËßàÂô®‰∏≠Êü•ÁúãÁªìÊûú„ÄÇ

---

> ‰∏ã‰∏ÄÁØáÊàë‰ª¨Â∞ÜÊé¢ËÆ®„ÄåËØÑ‰º∞ÂéüÂàô„ÄçÔºåÊï¨ËØ∑ÂÖ≥Ê≥®Êú¨Á≥ªÂàó„ÄÇ

**„ÄåÊèêÁ§∫ËØçÂ∑•Á®ãÔºö‰ªéÊ†∏ÂøÉÂéüÂàôÂà∞ÂâçÊ≤øÂÆûË∑µ„ÄçÁ≥ªÂàóÁõÆÂΩï**

1. ÂºïË®ÄÔºö‰∏∫‰ΩïÊèêÁ§∫ËØçÂ∑•Á®ãÊòØÊäÄÊúØÂõ¢ÈòüÁöÑÊ†∏ÂøÉËÉΩÂäõ
2. **promptfoo**ÔºàÊú¨ÊñáÔºâ
3. ËØÑ‰º∞ÂéüÂàô
4. ÂÆâÂÖ®ÊÄß‰∏ìÈ¢òÔºöÊèêÁ§∫ËØçÊ≥®ÂÖ•ÊîªÂáª‰∏éÈò≤Âæ°ÂÆûË∑µ
